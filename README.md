## Что тут

Здесь 5 разных модулей (4 приложения и 1 пакет с общим кодом), выполняющих одну общую задачу - замена текста в JSON-файлах на ключи и передача пар ключ-значение в третью систему.

Ключи формируются в виде строки: id json-файла + путь к тексту в json-файле.

Приложения получают и изменяют данные через Web API приложений, чьи данные они обслуживают.

У каждого приложения есть свои:
- README.md
- main.go для запуска.

В пакете common лежат конфиги всех приложений, используемые ими структуры и общие функции работы с кешом.

## Как это работает

1) установить Go: https://go.dev/doc/install
2) запустить **from_app_to_json_file**. 
```go
go run from_app_to_json_file/main.go
```
Оно сделает из json-файлов приложения json-файлы с парами ключ-значение для третьей системы. \
Файлы будут созданы в пакете /files.
3) проверить содержимое созданных json-файлов. \
В качестве значений для ключей должны быть указаны тексты, а не другие ключи. \
4) запустить **update_in_third_system**.
```go
go run update_in_third_system/main.go
```
Оно загрузит ключи в третью систему. \
Ключи будут загружены в отдельные наборы для каждой таблицы.
5) проверить в третьей системе наличие ключей.
6) если в третьей системе всё ОК, то запустить **update_in_app**. 
```go
go run update_in_app/main.go
```
Оно:
- отключит обновление кешей приложения,
- скачает из приложения json-файлы,
- заменит в json-файлах тексты на ключи Танкера,
- через API приложения сохранит новые son-файлы,
- сохранит в файлах **<table.name>-new-ids.txt** id новых son-файлов,
- по окончании своей работы, включит обновление кешей.
7) Если нужно откатить изменения, то - запустить **rollback_app**:
```go
go run rollback_app/main.go
```
Оно:
- отключит обновление кешей,
- через API приложения удалит json-файлы, чьи id прочитает из файлов **<table.name>-new-ids.txt**,
- включит обновление кешей.
